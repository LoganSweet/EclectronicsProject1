Version 4
SHEET 1 912 680
WIRE 160 144 32 144
WIRE 320 144 240 144
WIRE -128 160 -176 160
WIRE -176 176 -176 160
WIRE -368 192 -368 160
WIRE -208 192 -368 192
WIRE 160 192 112 192
WIRE -80 208 -144 208
WIRE 32 208 32 144
WIRE 32 208 0 208
WIRE 80 208 32 208
WIRE -368 224 -368 192
WIRE -208 224 -240 224
WIRE 320 224 320 144
WIRE 320 224 144 224
WIRE 368 224 320 224
WIRE 544 224 448 224
WIRE -128 240 -176 240
WIRE 80 240 32 240
WIRE 160 256 112 256
WIRE 544 272 544 224
WIRE 576 272 544 272
WIRE 704 272 640 272
WIRE -240 320 -240 224
WIRE -80 320 -80 208
WIRE -80 320 -240 320
WIRE 32 336 32 240
WIRE 160 336 32 336
WIRE 320 336 320 224
WIRE 320 336 240 336
WIRE 704 416 704 272
SYMBOL Opamps\\UniversalOpamp2 112 224 M180
SYMATTR InstName U1
SYMBOL cktsym\\vsource -496 32 R0
SYMATTR Value 3.3
SYMATTR InstName V1
SYMBOL res 16 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {wc(6340, tol_01)}
SYMATTR SpiceLine tol=1
SYMBOL res 256 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {wc(20000, tol_01)}
SYMATTR SpiceLine tol=1
SYMBOL res 256 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {wc(10000000, tol_01)}
SYMATTR SpiceLine tol=1
SYMBOL cktsym\\gnd 160 192 R0
SYMATTR InstName U3
SYMBOL cktsym\\gnd -496 96 R0
SYMATTR InstName U4
SYMBOL cktsym\\vdd -496 -32 R0
SYMATTR InstName U6
SYMBOL cktsym\\vdd 160 256 R0
SYMATTR InstName U7
SYMBOL cap 16 336 R0
SYMATTR InstName C1
SYMATTR Value {wc(0.0000001, tol_05)}
SYMBOL cktsym\\gnd 32 400 R0
SYMATTR InstName U2
SYMBOL res -384 208 R0
SYMATTR InstName R4
SYMATTR Value {wc(1270, tol_01)}
SYMATTR SpiceLine tol=1
SYMBOL res -384 64 R0
SYMATTR InstName R5
SYMATTR Value {wc(1270, tol_01)}
SYMATTR SpiceLine tol=1
SYMBOL cktsym\\vdd -368 80 R0
SYMATTR InstName U5
SYMBOL cktsym\\gnd -368 304 R0
SYMATTR InstName U8
SYMBOL Opamps\\UniversalOpamp2 -176 208 M180
SYMATTR InstName U9
SYMBOL cktsym\\gnd -128 160 R0
SYMATTR InstName U10
SYMBOL cktsym\\vdd -128 240 R0
SYMATTR InstName U11
SYMBOL diode 576 288 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value BLUE
SYMBOL res 464 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {wc(499, tol_01)}
SYMBOL cktsym\\gnd 704 416 R0
SYMATTR InstName U12
TEXT -128 504 Left 2 !.include engr2420.sub
TEXT -128 544 Left 2 !.tran 0 60 57 0.01
TEXT -128 576 Left 2 !.function wc(nom, tol) if(run==1, nom, if(flat(1)>0, nom*(1+tol), nom*(1-tol)))
TEXT 552 96 Left 2 !.param tol_05 = 0.05
TEXT 328 0 Left 2 !.step param run 1 100 1
TEXT 552 128 Left 2 !.param tol_01 = 0.01
TEXT 328 -32 Left 2 !.model BLUE D(Is=9.605E-28 N=1.842 Rs=16)
